# Database Migrations

This directory contains database migration files generated by Drizzle Kit.

## Files

- `0000_known_nebula.sql` - Initial migration creating all base tables
- `meta/_journal.json` - Migration metadata journal
- `meta/0000_snapshot.json` - Database schema snapshot

## Tables Created

1. **users** - User authentication and management
2. **agents** - AI agents configuration and status
3. **phases** - Project phases tracking
4. **repositories** - Repository status monitoring
5. **services** - Service health monitoring
6. **activities** - Activity logging
7. **workflows** - Inter-agent workflows
8. **annotations** - Text annotation results

## Running Migrations

To apply migrations to your database:

```bash
# Set your database URL
export DATABASE_URL="postgresql://user:password@localhost:5432/database"

# Generate new migrations (if schema changes)
npx drizzle-kit generate

# Apply migrations to database
npx drizzle-kit migrate
```

## Testing

Run the migration test suite:

```bash
# Test migrations and schema
./test-migrations.sh

# Or run specific tests
npm test tests/database-migration.test.ts
npm test tests/integration.test.ts
```

## Schema Management

The database schema is defined in `../shared/schema.ts` using Drizzle ORM. Any changes to the schema should be followed by generating new migrations.

## Configuration

Migration configuration is defined in `../drizzle.config.ts`.